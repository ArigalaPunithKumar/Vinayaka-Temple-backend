<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sri Vinayaka Swamy Temple</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        temple: {
                            primary: '#ea580c',
                            secondary: '#7f1d1d',
                            gold: '#fbbf24',
                            light: '#fffbeb',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Merriweather', 'serif'],
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Merriweather:wght@400;700;900&display=swap');

        body {
            background-color: #fffbeb;
        }

        .hero-pattern {
            background-color: #ea580c;
            background-image: linear-gradient(rgba(127, 29, 29, 0.8), rgba(127, 29, 29, 0.9)), url('https://images.unsplash.com/photo-1582005450386-52cc8bfc54ac?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
        }

        .page-section {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }

        .page-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body class="font-sans text-gray-800 flex flex-col min-h-screen">

    <audio id="bg-music" loop preload="auto">
        <source src="assets/audio/VinayakaSwamy.mp3" type="audio/mpeg">
    </audio>

    <button id="music-toggle-btn" onclick="toggleMusic()"
        class="fixed bottom-6 right-6 bg-temple-gold text-temple-secondary w-14 h-14 rounded-full shadow-2xl z-50 flex items-center justify-center hover:scale-110 transition-transform cursor-pointer">
        <i id="music-icon" class="fa-solid fa-music text-xl pointer-events-none"></i>
    </button>

    <nav class="bg-temple-secondary text-temple-light shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex items-center cursor-pointer" onclick="navigateTo('home')">
                    <i class="fa-solid fa-om text-3xl text-temple-gold mr-3"></i>
                    <div>
                        <h1 class="font-serif text-xl md:text-2xl font-bold tracking-wide text-temple-gold">Sri Vinayaka
                            Swamy</h1>
                        <p class="text-xs text-temple-light opacity-80 uppercase tracking-widest"><i
                                class="fa-solid fa-location-dot mr-2"></i> Ponnedupalle</p>
                    </div>
                </div>

                <div class="hidden md:flex items-center space-x-8">
                    <button onclick="navigateTo('home')"
                        class="hover:text-temple-gold transition-colors font-medium">Home</button>
                    <button onclick="navigateTo('poojas')"
                        class="hover:text-temple-gold transition-colors font-medium">Poojas & Sevas</button>
                    <button onclick="navigateTo('about')"
                        class="hover:text-temple-gold transition-colors font-medium">History</button>
                    <button onclick="navigateTo('gallery')"
                        class="hover:text-temple-gold transition-colors font-medium">Gallery</button>

                    <button id="nav-profile-btn" onclick="navigateTo('profile')"
                        class="hidden hover:text-temple-gold transition-colors font-medium">My Profile</button>

                    <button id="nav-auth-btn" onclick="navigateTo('auth')"
                        class="bg-temple-primary hover:bg-orange-700 text-white px-6 py-2 rounded-full font-semibold transition-colors shadow-md border border-orange-500">
                        <i class="fa-solid fa-user mr-2"></i> Login / Register
                    </button>
                    <button id="nav-logout-btn" onclick="handleLogout()"
                        class="hidden bg-temple-secondary hover:bg-red-800 text-white px-6 py-2 rounded-full font-semibold transition-colors shadow-md border border-red-500">
                        <i class="fa-solid fa-right-from-bracket mr-2"></i> Logout
                    </button>
                </div>

                <div class="md:hidden flex items-center">
                    <button onclick="toggleMobileMenu()" class="text-temple-gold hover:text-white focus:outline-none">
                        <i class="fa-solid fa-bars text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <div id="mobile-menu" class="hidden md:hidden bg-temple-secondary border-t border-red-800 pb-4">
            <button onclick="navigateTo('home'); toggleMobileMenu()"
                class="block w-full text-left px-4 py-3 hover:bg-red-800 text-temple-light">Home</button>
            <button onclick="navigateTo('poojas'); toggleMobileMenu()"
                class="block w-full text-left px-4 py-3 hover:bg-red-800 text-temple-light">Poojas & Sevas</button>
            <button onclick="navigateTo('about'); toggleMobileMenu()"
                class="block w-full text-left px-4 py-3 hover:bg-red-800 text-temple-light">History</button>
            <button onclick="navigateTo('gallery'); toggleMobileMenu()"
                class="block w-full text-left px-4 py-3 hover:bg-red-800 text-temple-light">Gallery</button>

            <button id="mobile-profile-btn" onclick="navigateTo('profile'); toggleMobileMenu()"
                class="hidden block w-full text-left px-4 py-3 hover:bg-red-800 text-temple-light text-temple-gold font-bold">My
                Profile</button>

            <button id="mobile-auth-btn" onclick="navigateTo('auth'); toggleMobileMenu()"
                class="block w-full text-left px-4 py-3 bg-temple-primary text-white font-bold mt-2">Login /
                Register</button>
            <button id="mobile-logout-btn" onclick="handleLogout(); toggleMobileMenu()"
                class="hidden w-full text-left px-4 py-3 bg-red-800 text-white font-bold mt-2">Logout</button>
        </div>
    </nav>

    <main class="flex-grow">

        <div id="home" class="page-section active">
            <div class="hero-pattern text-center py-20 px-4 relative">
                <div class="absolute inset-0 bg-black bg-opacity-60"></div>
                <div class="relative z-10 max-w-4xl mx-auto flex flex-col items-center">
                    <img src="https://i.pinimg.com/474x/8a/c7/c1/8ac7c1d8fa8f5be83cf14a43ddb2cfdc.jpg"
                        alt="Sri Vinayaka Swamy"
                        class="w-48 h-48 md:w-64 md:h-64 rounded-full border-4 border-temple-gold shadow-2xl mb-6 object-cover">
                    <h2 class="font-serif text-4xl md:text-6xl font-bold text-white mb-6 leading-tight">ఓం శ్రీ మహా
                        గణపతయే నమః</h2>
                    <p class="text-lg md:text-xl text-temple-light mb-10 opacity-90 max-w-2xl mx-auto">Welcome to the
                        sacred abode of Sri Vinayaka Swamy. Experience divine bliss, participate in daily sevas, and
                        seek the blessings of the remover of obstacles.</p>
                    <div class="flex flex-col sm:flex-row justify-center gap-4">
                        <button onclick="navigateTo('poojas')"
                            class="bg-temple-gold text-temple-secondary hover:bg-yellow-500 px-8 py-3 rounded-full font-bold text-lg shadow-lg transition-transform hover:scale-105">
                            Book Darshan & Sevas
                        </button>
                        <button onclick="navigateTo('gallery')"
                            class="bg-transparent border-2 border-temple-gold text-temple-gold hover:bg-temple-gold hover:text-temple-secondary px-8 py-3 rounded-full font-bold text-lg shadow-lg transition-colors">
                            Temple Gallery
                        </button>
                    </div>
                </div>
            </div>

            <div class="max-w-7xl mx-auto px-4 py-16">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="bg-white p-8 rounded-xl shadow-md border border-orange-100 text-center">
                        <div
                            class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4 text-temple-primary text-2xl">
                            <i class="fa-regular fa-clock"></i>
                        </div>
                        <h3 class="font-serif font-bold text-xl mb-2 text-temple-secondary">Temple Timings</h3>
                        <p class="text-gray-600">Morning: 5:00 AM - 10:00 AM</p>
                        <p class="text-gray-600">Evening: 6:00 PM - 8:00 PM</p>
                    </div>

                    <div class="bg-white p-8 rounded-xl shadow-md border border-orange-100 text-center">
                        <div
                            class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4 text-temple-primary text-2xl">
                            <i class="fa-solid fa-calendar-days"></i>
                        </div>
                        <h3 class="font-serif font-bold text-xl mb-4 text-temple-secondary">Upcoming Festivals</h3>
                        <div id="festivals-container" class="space-y-3 max-h-40 overflow-y-auto">
                            <p class="text-sm text-gray-500 italic">Loading festivals...</p>
                        </div>
                    </div>

                    <div class="bg-white p-8 rounded-xl shadow-md border border-orange-100 text-center">
                        <div
                            class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4 text-temple-primary text-2xl">
                            <i class="fa-solid fa-phone"></i>
                        </div>
                        <h3 class="font-serif font-bold text-xl mb-2 text-temple-secondary">Contact Us</h3>
                        <p class="text-gray-600">info@vinayakaswamy.org</p>
                        <p class="text-gray-600">+91 9392465021</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="poojas" class="page-section bg-temple-light py-12">
            <div class="max-w-7xl mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="font-serif text-3xl md:text-4xl font-bold text-temple-secondary mb-4">Poojas & Sevas</h2>
                    <div class="w-24 h-1 bg-temple-primary mx-auto rounded"></div>
                    <p class="mt-4 text-gray-600 max-w-2xl mx-auto">Book your sevas online. Devotees are requested to
                        bring printed receipts or show the Mail confirmation at the temple counter.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div
                        class="bg-white rounded-xl shadow-md overflow-hidden border border-orange-200 flex flex-col hover:shadow-xl transition-shadow relative">
                        <div class="bg-orange-100 p-6 flex items-center justify-center">
                            <i class="fa-solid fa-sun text-5xl text-temple-primary"></i>
                        </div>
                        <div class="p-6 flex-grow flex flex-col">
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="font-serif font-bold text-xl text-temple-secondary flex items-center">
                                    Suprabhata Seva
                                    <span class="booking-tick hidden text-green-600 ml-2 text-xl"
                                        data-seva="Suprabhata Seva" title="You have booked this Seva"><i
                                            class="fa-solid fa-circle-check"></i></span>
                                </h3>
                                <span
                                    class="bg-green-100 text-green-800 text-xs font-bold px-2 py-1 rounded">Daily</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-4">Awakening the Lord with sacred hymns in the early
                                morning.</p>
                            <div class="mt-auto">
                                <div class="flex justify-between items-center mb-4">
                                    <span class="text-sm text-gray-500"><i class="fa-regular fa-clock mr-1"></i> 5:00
                                        AM</span>
                                    <span class="font-bold text-green-600 text-lg">Free</span>
                                </div>
                                <button onclick="openBookingModal('Suprabhata Seva')"
                                    class="w-full bg-temple-secondary text-white py-2 rounded font-semibold hover:bg-red-800 transition-colors">Book
                                    Now</button>
                            </div>
                        </div>
                    </div>

                    <div
                        class="bg-white rounded-xl shadow-md overflow-hidden border border-orange-200 flex flex-col hover:shadow-xl transition-shadow relative">
                        <div class="bg-orange-100 p-6 flex items-center justify-center">
                            <i class="fa-solid fa-fire text-5xl text-temple-primary"></i>
                        </div>
                        <div class="p-6 flex-grow flex flex-col">
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="font-serif font-bold text-xl text-temple-secondary flex items-center">
                                    Ganapathi Homam
                                    <span class="booking-tick hidden text-green-600 ml-2 text-xl"
                                        data-seva="Ganapathi Homam" title="You have booked this Seva"><i
                                            class="fa-solid fa-circle-check"></i></span>
                                </h3>
                                <span
                                    class="bg-green-100 text-green-800 text-xs font-bold px-2 py-1 rounded">Daily</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-4">Sacred fire ritual performed to remove obstacles and
                                bring success.</p>
                            <div class="mt-auto">
                                <div class="flex justify-between items-center mb-4">
                                    <span class="text-sm text-gray-500"><i class="fa-regular fa-clock mr-1"></i> 7:30
                                        AM</span>
                                    <span class="font-bold text-green-600 text-lg">Free</span>
                                </div>
                                <button onclick="openBookingModal('Ganapathi Homam')"
                                    class="w-full bg-temple-secondary text-white py-2 rounded font-semibold hover:bg-red-800 transition-colors">Book
                                    Now</button>
                            </div>
                        </div>
                    </div>

                    <div
                        class="bg-white rounded-xl shadow-md overflow-hidden border border-orange-200 flex flex-col hover:shadow-xl transition-shadow relative">
                        <div class="bg-orange-100 p-6 flex items-center justify-center">
                            <i class="fa-solid fa-droplet text-5xl text-temple-primary"></i>
                        </div>
                        <div class="p-6 flex-grow flex flex-col">
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="font-serif font-bold text-xl text-temple-secondary flex items-center">
                                    Panchamrutha Abhishekam
                                    <span class="booking-tick hidden text-green-600 ml-2 text-xl"
                                        data-seva="Panchamrutha Abhishekam" title="You have booked this Seva"><i
                                            class="fa-solid fa-circle-check"></i></span>
                                </h3>
                                <span
                                    class="bg-blue-100 text-blue-800 text-xs font-bold px-2 py-1 rounded">Weekly</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-4">Holy bath offered to the deity using milk, curd,
                                honey, sugar, and ghee.</p>
                            <div class="mt-auto">
                                <div class="flex justify-between items-center mb-4">
                                    <span class="text-sm text-gray-500"><i class="fa-regular fa-clock mr-1"></i> Fri,
                                        8:00 AM</span>
                                    <span class="font-bold text-green-600 text-lg">Free</span>
                                </div>
                                <button onclick="openBookingModal('Panchamrutha Abhishekam')"
                                    class="w-full bg-temple-secondary text-white py-2 rounded font-semibold hover:bg-red-800 transition-colors">Book
                                    Now</button>
                            </div>
                        </div>
                    </div>

                    <div
                        class="bg-white rounded-xl shadow-md overflow-hidden border border-orange-200 flex flex-col hover:shadow-xl transition-shadow relative">
                        <div class="bg-orange-100 p-6 flex items-center justify-center">
                            <i class="fa-brands fa-pagelines text-5xl text-temple-primary"></i>
                        </div>
                        <div class="p-6 flex-grow flex flex-col">
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="font-serif font-bold text-xl text-temple-secondary flex items-center">
                                    Sahasranama Archana
                                    <span class="booking-tick hidden text-green-600 ml-2 text-xl"
                                        data-seva="Sahasranama Archana" title="You have booked this Seva"><i
                                            class="fa-solid fa-circle-check"></i></span>
                                </h3>
                                <span
                                    class="bg-green-100 text-green-800 text-xs font-bold px-2 py-1 rounded">Daily</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-4">Chanting of 1000 names of Lord Ganesha with floral
                                offerings.</p>
                            <div class="mt-auto">
                                <div class="flex justify-between items-center mb-4">
                                    <span class="text-sm text-gray-500"><i class="fa-regular fa-clock mr-1"></i> 10:00
                                        AM - 12 PM</span>
                                    <span class="font-bold text-green-600 text-lg">Free</span>
                                </div>
                                <button onclick="openBookingModal('Sahasranama Archana')"
                                    class="w-full bg-temple-secondary text-white py-2 rounded font-semibold hover:bg-red-800 transition-colors">Book
                                    Now</button>
                            </div>
                        </div>
                    </div>

                    <div
                        class="bg-white rounded-xl shadow-md overflow-hidden border border-orange-200 flex flex-col hover:shadow-xl transition-shadow relative">
                        <div class="bg-orange-100 p-6 flex items-center justify-center">
                            <i class="fa-solid fa-car text-5xl text-temple-primary"></i>
                        </div>
                        <div class="p-6 flex-grow flex flex-col">
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="font-serif font-bold text-xl text-temple-secondary flex items-center">
                                    Vahana Pooja
                                    <span class="booking-tick hidden text-green-600 ml-2 text-xl"
                                        data-seva="Vahana Pooja" title="You have booked this Seva"><i
                                            class="fa-solid fa-circle-check"></i></span>
                                </h3>
                                <span
                                    class="bg-green-100 text-green-800 text-xs font-bold px-2 py-1 rounded">Daily</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-4">Special pooja for new vehicles to ensure safe travels
                                and ward off accidents.</p>
                            <div class="mt-auto">
                                <div class="flex justify-between items-center mb-4">
                                    <span class="text-sm text-gray-500"><i class="fa-regular fa-clock mr-1"></i> All
                                        Day</span>
                                    <span class="font-bold text-green-600 text-lg">Free</span>
                                </div>
                                <button onclick="openBookingModal('Vahana Pooja')"
                                    class="w-full bg-temple-secondary text-white py-2 rounded font-semibold hover:bg-red-800 transition-colors">Book
                                    Now</button>
                            </div>
                        </div>
                    </div>

                    <div
                        class="bg-white rounded-xl shadow-md overflow-hidden border border-orange-200 flex flex-col hover:shadow-xl transition-shadow relative">
                        <div class="bg-orange-100 p-6 flex items-center justify-center">
                            <i class="fa-solid fa-crown text-5xl text-temple-primary"></i>
                        </div>
                        <div class="p-6 flex-grow flex flex-col">
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="font-serif font-bold text-xl text-temple-secondary flex items-center">
                                    Saswatha Nidhi
                                    <span class="booking-tick hidden text-green-600 ml-2 text-xl"
                                        data-seva="Saswatha Nidhi" title="You have booked this Seva"><i
                                            class="fa-solid fa-circle-check"></i></span>
                                </h3>
                                <span
                                    class="bg-purple-100 text-purple-800 text-xs font-bold px-2 py-1 rounded">Lifetime</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-4">Permanent endowment fund. Pooja will be performed on a
                                specific day chosen by the devotee every year.</p>
                            <div class="mt-auto">
                                <div class="flex justify-between items-center mb-4">
                                    <span class="text-sm text-gray-500"><i class="fa-solid fa-calendar mr-1"></i> Chosen
                                        Date</span>
                                    <span class="font-bold text-green-600 text-lg">Free</span>
                                </div>
                                <button onclick="openBookingModal('Saswatha Nidhi')"
                                    class="w-full bg-temple-secondary text-white py-2 rounded font-semibold hover:bg-red-800 transition-colors">Book
                                    Now</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="profile" class="page-section bg-temple-light py-12">
            <div class="max-w-5xl mx-auto px-4">
                <div class="text-center mb-10">
                    <h2 class="font-serif text-3xl md:text-4xl font-bold text-temple-secondary mb-4">My Profile</h2>
                    <div class="w-24 h-1 bg-temple-primary mx-auto rounded"></div>
                </div>

                <div class="bg-white rounded-xl shadow-md border border-orange-100 p-8 mb-8">
                    <div class="flex items-center">
                        <div
                            class="w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center text-temple-primary text-3xl mr-6">
                            <i class="fa-solid fa-user"></i>
                        </div>
                        <div>
                            <h3 class="font-serif text-2xl font-bold text-gray-800" id="profile-name-display">Devotee
                                Name</h3>
                            <p class="text-gray-600" id="profile-email-display">email@example.com</p>
                        </div>
                    </div>
                </div>

                <h3 class="font-serif text-2xl font-bold text-temple-secondary mb-6">My Booked Sevas</h3>
                <div class="bg-white rounded-xl shadow-md border border-orange-100 overflow-hidden">
                    <div id="bookings-list" class="divide-y divide-orange-100">
                    </div>
                </div>
            </div>
        </div>

        <div id="about" class="page-section bg-white py-12">
            <div class="max-w-4xl mx-auto px-4">
                <div class="text-center mb-10">
                    <h2 class="font-serif text-3xl md:text-4xl font-bold text-temple-secondary mb-4">ఆలయ స్థల పురాణం
                    </h2>
                    <div class="w-24 h-1 bg-temple-primary mx-auto rounded"></div>
                </div>
                <div class="prose prose-lg text-gray-700 mx-auto space-y-6">
                    <p style="text-align:center"><b>ఓం శ్రీ మహాగణపతయే నమః</b></p>
                    <p>భక్తి, శ్రద్ధ, అంకితభావాలతో
                        శ్రీ అరిగల కృష్ణయ్య గారు మరియు వారి సతీమణి
                        శ్రీమతి అరిగల కృష్ణమ్మ గారులు
                        శ్రీ వినాయక స్వామి దేవస్థానాన్ని స్థాపించి,
                        ఆగమ శాస్త్రోక్త విధానముల ప్రకారం
                        విగ్రహ ప్రతిష్ఠ నిర్వహించిరి..</p>
                    <p>ఆలయములో ప్రతిష్ఠించబడిన
                        శ్రీ మహా గణపతి విగ్రహము
                        పొన్నెడుపల్లె గ్రామానికి చెందిన
                        శిల్పి శ్రీ కలవకుంట్ల కొదండయ్య గారి చేత
                        శ్రద్ధాభక్తులతో మూర్తిరూపం పొందినది.</p>
                    <p>ఆగమ శాస్త్రోక్త విధానముల ప్రకారం
                        విగ్రహ ప్రతిష్ఠ మహోత్సవము నిర్వహించబడినది.
                        స్వయంభూ కాకపోయినను,
                        శాస్త్రోక్తంగా ప్రతిష్ఠింపబడిన ఈ దివ్య విగ్రహము
                        భక్తులకు అనుగ్రహ ప్రసాదములను కురిపించుచున్నది.
                    </p>
                    <p>తరువాత కాలమున
                        వారి జ్యేష్ఠ కుమారులు
                        శ్రీ అరిగల లక్ష్మీపతి గారు మరియు వారి సతీమణి
                        శ్రీమతి అరిగల తులసి గారులతో కూడి
                        ఆలయాభివృద్ధి, విస్తరణ కార్యములను
                        భక్తి భావముతో నిర్వహించిరి.</p>
                    <p>ప్రస్తుతం
                        వారి కనిష్ఠ కుమారులు
                        శ్రీ అరిగల మోహన్ గారు మరియు వారి సతీమణి
                        శ్రీమతి అరిగల నాగమ్మ గారులతో కూడి
                        నిత్య పూజా కార్యక్రమములను
                        శ్రద్ధా భక్తులతో నిర్వహించుచున్నారు.</p>
                    <p>ఈ పవిత్ర సేవా ధర్మము
                        అరిగల వంశ పరంపరగా
                        తరతరాలుగా కొనసాగుచున్నది.</p>
                    <p>తదుపరి తరముగా
                        శ్రీ అరిగల లక్ష్మీపతి – శ్రీమతి అరిగల తులసి గారి సంతానము
                        అరిగల పునీత్ కుమార్, అరిగల తేజశ్రీ
                        అలాగే</p>
                    <p>శ్రీ అరిగల మోహన్ – శ్రీమతి అరిగల నాగమ్మ గారి సంతానము
                        అరిగల కౌశిక్, అరిగల రుచిత
                        ఈ దైవిక కర్తవ్యాన్ని భవిష్యత్తులోనూ
                        నిరంతరంగా కొనసాగించుదురు.</p>
                    <p style="text-align: center;"><b>ఇతి శ్రీ అరిగల వంశ పరంపరాయాంః
                            శ్రీ వినాయక స్వామి సేవా వైభవం</b></p>
                </div>
            </div>
        </div>

        <div id="gallery" class="page-section bg-temple-light py-12">
            <div class="max-w-7xl mx-auto px-4">
                <div class="text-center mb-10">
                    <h2 class="font-serif text-3xl md:text-4xl font-bold text-temple-secondary mb-4">Temple Gallery</h2>
                    <div class="w-24 h-1 bg-temple-primary mx-auto rounded"></div>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
                    <img src="assets/images/Temple1.png" alt="Temple Architecture"
                        class="w-full h-64 object-cover rounded-lg shadow-md hover:scale-105 transition-transform duration-300">
                    <img src="https://images.unsplash.com/photo-1599577180572-c32ab512dbbc?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                        alt="Ganesha Deity"
                        class="w-full h-64 object-cover rounded-lg shadow-md hover:scale-105 transition-transform duration-300">
                    <img src="https://images.unsplash.com/photo-1620021614281-224a1b023f9b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                        alt="Temple Bells"
                        class="w-full h-64 object-cover rounded-lg shadow-md hover:scale-105 transition-transform duration-300">
                    <img src="https://images.unsplash.com/photo-1582005450386-52cc8bfc54ac?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                        alt="Evening Aarti"
                        class="w-full h-64 object-cover rounded-lg shadow-md hover:scale-105 transition-transform duration-300">
                    <img src="assets/images/Offerings.png" alt="Offerings"
                        class="w-full h-64 object-cover rounded-lg shadow-md hover:scale-105 transition-transform duration-300">
                    <img src="https://images.unsplash.com/photo-1614088925576-9c424e68e4ee?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                        alt="Temple Entrance"
                        class="w-full h-64 object-cover rounded-lg shadow-md hover:scale-105 transition-transform duration-300">
                </div>
            </div>
        </div>

        <div id="auth" class="page-section py-12 px-4 bg-temple-light">
            <div class="max-w-md mx-auto bg-white rounded-2xl shadow-xl overflow-hidden border border-orange-100">
                <div class="bg-temple-secondary text-center py-8 px-6 text-white relative">
                    <i class="fa-solid fa-om text-4xl text-temple-gold opacity-30 absolute top-4 right-4"></i>
                    <h2 class="font-serif text-2xl font-bold mb-1" id="auth-title">Devotee Login</h2>
                    <p class="text-sm text-temple-light opacity-80" id="auth-subtitle">Welcome back! Sign in to book
                        sevas.</p>
                </div>
                <div class="p-8">
                    <form id="auth-form" onsubmit="handleAuth(event)">
                        <div id="name-field" class="hidden mb-5">
                            <label class="block text-gray-700 text-sm font-bold mb-2" for="fullname">Full Name</label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fa-regular fa-user text-gray-400"></i>
                                </div>
                                <input type="text" id="fullname"
                                    class="w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-temple-primary focus:ring-1 focus:ring-temple-primary"
                                    placeholder="Puneet Kumar">
                            </div>
                        </div>
                        <div class="mb-5">
                            <label class="block text-gray-700 text-sm font-bold mb-2" for="email">Email Address</label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fa-regular fa-envelope text-gray-400"></i>
                                </div>
                                <input type="email" id="email" required
                                    class="w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-temple-primary focus:ring-1 focus:ring-temple-primary"
                                    placeholder="devotee@example.com">
                            </div>
                        </div>
                        <div class="mb-6">
                            <label class="block text-gray-700 text-sm font-bold mb-2" for="password">Password</label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fa-solid fa-lock text-gray-400"></i>
                                </div>
                                <input type="password" id="password" required
                                    class="w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-temple-primary focus:ring-1 focus:ring-temple-primary"
                                    placeholder="••••••••">
                            </div>
                        </div>
                        <button type="submit" id="auth-submit-btn"
                            class="w-full bg-temple-primary hover:bg-orange-700 text-white font-bold py-3 px-4 rounded-lg shadow transition-colors duration-200">
                            Login
                        </button>
                    </form>
                    <div class="mt-6 text-center text-sm">
                        <p class="text-gray-600" id="auth-toggle-text">
                            Don't have an account?
                            <button onclick="toggleAuthMode()"
                                class="text-temple-secondary font-bold hover:underline focus:outline-none">Sign Up
                                here</button>
                        </p>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <footer class="bg-temple-secondary text-temple-light mt-auto">
        <div class="max-w-7xl mx-auto px-4 py-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <div class="flex items-center mb-4">
                        <i class="fa-solid fa-om text-2xl text-temple-gold mr-2"></i>
                        <h4 class="font-serif font-bold text-xl text-temple-gold">Sri Vinayaka Swamy</h4>
                    </div>
                    <p class="text-sm opacity-80 mb-4">Dedicated to providing a spiritual haven for devotees. Join us in
                        our daily prayers and sevas.</p>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-4 text-white border-b border-red-800 pb-2 inline-block">Quick Links
                    </h4>
                    <ul class="space-y-2 text-sm opacity-80">
                        <li><button onclick="navigateTo('home')" class="hover:text-temple-gold">Home</button></li>
                        <li><button onclick="navigateTo('poojas')" class="hover:text-temple-gold">E-Sevas /
                                Poojas</button></li>
                        <li><button onclick="navigateTo('gallery')" class="hover:text-temple-gold">Gallery</button></li>
                        <li><button onclick="navigateTo('about')" class="hover:text-temple-gold">Temple History</button>
                        </li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-4 text-white border-b border-red-800 pb-2 inline-block">Address</h4>
                    <address class="not-italic text-sm opacity-80 space-y-2">
                        <p><i class="fa-solid fa-location-dot mr-2"></i> Ponnedupalle, Thavanampalle, Puttur, Chittoor,
                            Andhra Pradesh, India 517131</p>
                        <p><i class="fa-solid fa-envelope mr-2"></i> contact@vinayakaswamy.org</p>
                        <p><i class="fa-solid fa-phone mr-2"></i> +91 9392465021</p>
                    </address>
                </div>
            </div>
            <div class="border-t border-red-800 mt-8 pt-6 text-center text-xs opacity-60">
                <p>&copy; 2026 Sri Vinayaka Swamy Temple Trust. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <div id="booking-modal"
        class="hidden fixed inset-0 bg-black bg-opacity-60 z-[100] flex items-center justify-center backdrop-blur-sm">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 overflow-hidden border-2 border-temple-gold">
            <div class="bg-temple-secondary text-white p-4 text-center">
                <h3 class="font-serif text-2xl font-bold" id="modal-seva-title">Book Seva</h3>
            </div>
            <div class="p-6">
                <form id="booking-form" onsubmit="confirmBooking(event)">
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="booking-date">Select Date for
                            Seva</label>
                        <input type="date" id="booking-date" required
                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-temple-primary focus:ring-1 focus:ring-temple-primary">
                    </div>
                    <div class="flex justify-end space-x-3 mt-6">
                        <button type="button" onclick="closeModal()"
                            class="px-5 py-2 text-gray-600 font-semibold hover:bg-gray-100 rounded-lg transition-colors">Cancel</button>
                        <button type="submit"
                            class="px-5 py-2 bg-temple-primary text-white font-semibold rounded-lg hover:bg-orange-700 transition-colors">Confirm
                            Date</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Calendar Integration
        function loadFestivals() {
            const container = document.getElementById('festivals-container');

            const festivals = [
                { date: `2026-01-14`, localName: "Makar Sankranti" },
                { date: `2026-02-15`, localName: "Maha Shivaratri" },
                { date: `2026-03-19`, localName: "Ugadi" },
                { date: `2026-03-26`, localName: "Sri Rama Navami" },
                { date: `2026-09-14`, localName: "Vinayaka Chavithi" },
                { date: `2026-10-20`, localName: "Vijayadashami (Dussehra)" },
                { date: `2026-11-08`, localName: "Deepavali" }
            ];

            const today = new Date();
            today.setHours(0, 0, 0, 0);

            const upcoming = festivals.filter(h => new Date(h.date) >= today).slice(0, 6);

            if (upcoming.length > 0) {
                container.innerHTML = upcoming.map(h => `
                    <div class="flex justify-between items-center border-b border-orange-50 pb-2">
                        <span class="text-gray-700 font-medium text-left">${h.localName}</span>
                        <span class="text-xs text-temple-primary font-bold bg-orange-50 px-2 py-1 rounded">${new Date(h.date).toLocaleDateString('en-IN', { day: 'numeric', month: 'short' })}</span>
                    </div>
                `).join('');
            } else {
                container.innerHTML = `<p class="text-gray-600 text-sm">No more upcoming festivals listed for this year.</p>`;
            }
        }

        window.addEventListener('DOMContentLoaded', loadFestivals);

        // Music Logic
        const bgMusic = document.getElementById('bg-music');
        const musicIcon = document.getElementById('music-icon');
        let isMusicPlaying = false;

        document.body.addEventListener('click', (e) => {
            if (e.target.closest('#music-toggle-btn')) return;

            if (!isMusicPlaying && bgMusic.paused) {
                let playPromise = bgMusic.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        isMusicPlaying = true;
                        musicIcon.className = 'fa-solid fa-volume-high text-xl pointer-events-none';
                    }).catch(err => {
                        console.log("Autoplay prevented by browser.");
                    });
                }
            }
        }, { once: true });

        function toggleMusic() {
            if (isMusicPlaying) {
                bgMusic.pause();
                isMusicPlaying = false;
                musicIcon.className = 'fa-solid fa-music text-xl pointer-events-none';
            } else {
                let playPromise = bgMusic.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        isMusicPlaying = true;
                        musicIcon.className = 'fa-solid fa-volume-high text-xl pointer-events-none';
                    }).catch(err => {
                        console.error("Play failed:", err);
                        alert("Audio could not be played. Please verify the MP3 file path.");
                    });
                }
            }
        }

        // Authentication, Routing & Profile Logic
        let isLoginMode = true;
        let isLoggedIn = false;
        let currentUserEmail = '';
        let currentUserFullName = '';
        let currentSevaToBook = '';

        function navigateTo(pageId) {
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
            });
            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.classList.add('active');
            }
            window.scrollTo(0, 0);
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        function toggleAuthMode() {
            isLoginMode = !isLoginMode;
            const title = document.getElementById('auth-title');
            const subtitle = document.getElementById('auth-subtitle');
            const nameField = document.getElementById('name-field');
            const submitBtn = document.getElementById('auth-submit-btn');
            const toggleText = document.getElementById('auth-toggle-text');

            if (isLoginMode) {
                title.textContent = "Devotee Login";
                subtitle.textContent = "Welcome back! Sign in to book sevas.";
                nameField.classList.add('hidden');
                document.getElementById('fullname').removeAttribute('required');
                submitBtn.textContent = "Login";
                toggleText.innerHTML = `Don't have an account? <button type="button" onclick="toggleAuthMode()" class="text-temple-secondary font-bold hover:underline focus:outline-none">Sign Up here</button>`;
            } else {
                title.textContent = "New Devotee Registration";
                subtitle.textContent = "Create an account to book sevas and make offerings.";
                nameField.classList.remove('hidden');
                document.getElementById('fullname').setAttribute('required', 'true');
                submitBtn.textContent = "Register";
                toggleText.innerHTML = `Already have an account? <button type="button" onclick="toggleAuthMode()" class="text-temple-secondary font-bold hover:underline focus:outline-none">Login here</button>`;
            }
        }

        async function fetchUserBookings() {
            if (!currentUserEmail) return;
            try {
                const response = await fetch(`https://sri-vinayaka-swamy-temple.onrender.com/api/bookings/${currentUserEmail}`);
                if (response.ok) {
                    const bookings = await response.json();
                    updateBookingsUI(bookings);
                }
            } catch (e) {
                console.error('Failed to fetch bookings', e);
            }
        }

        function updateBookingsUI(bookings) {
            // Reset all green checkmarks on Seva cards
            document.querySelectorAll('.booking-tick').forEach(el => el.classList.add('hidden'));

            const listContainer = document.getElementById('bookings-list');

            if (bookings.length === 0) {
                listContainer.innerHTML = `<div class="p-8 text-center text-gray-500 italic">You have not booked any sevas yet.</div>`;
                return;
            }

            let listHTML = '';
            bookings.forEach(b => {
                // Show the green checkmark on the corresponding Seva card
                const tickIcon = document.querySelector(`.booking-tick[data-seva="${b.seva}"]`);
                if (tickIcon) tickIcon.classList.remove('hidden');

                // Populate the "My Profile" bookings list
                const dateStr = new Date(b.date).toLocaleDateString('en-IN', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
                listHTML += `
                    <div class="p-6 flex flex-col sm:flex-row sm:justify-between sm:items-center hover:bg-orange-50 transition-colors">
                        <div class="mb-3 sm:mb-0">
                            <h4 class="font-bold text-lg text-temple-secondary">${b.seva}</h4>
                            <p class="text-gray-600 text-sm"><i class="fa-regular fa-calendar mr-2"></i>${dateStr}</p>
                        </div>
                        <span class="bg-green-100 text-green-800 text-xs font-bold px-4 py-2 rounded-full self-start sm:self-auto"><i class="fa-solid fa-check mr-1"></i> Confirmed</span>
                    </div>
                `;
            });
            listContainer.innerHTML = listHTML;
        }

        async function handleAuth(event) {
            event.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const fullname = document.getElementById('fullname') ? document.getElementById('fullname').value : '';

            const endpoint = isLoginMode ? 'https://sri-vinayaka-swamy-temple.onrender.com/login' : 'https://sri-vinayaka-swamy-temple.onrender.com/api/register';
            const bodyData = isLoginMode ? { email, password } : { email, password, fullname };

            try {
                const response = await fetch(endpoint, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(bodyData)
                });

                const data = await response.json();

                if (response.ok) {
                    if (isLoginMode) {
                        isLoggedIn = true;
                        currentUserEmail = email;
                        currentUserFullName = data.user.fullname;

                        // Update Navigation
                        document.getElementById('nav-auth-btn').classList.add('hidden');
                        document.getElementById('nav-profile-btn').classList.remove('hidden');
                        document.getElementById('nav-logout-btn').classList.remove('hidden');

                        document.getElementById('mobile-auth-btn').classList.add('hidden');
                        document.getElementById('mobile-profile-btn').classList.remove('hidden');
                        document.getElementById('mobile-logout-btn').classList.remove('hidden');

                        // Set Profile details
                        document.getElementById('profile-name-display').textContent = currentUserFullName;
                        document.getElementById('profile-email-display').textContent = currentUserEmail;

                        // Fetch the user's booking history
                        await fetchUserBookings();

                        document.getElementById('auth-form').reset();
                        navigateTo('profile');
                    } else {
                        alert("Registration successful! Please login.");
                        toggleAuthMode();
                    }
                } else {
                    alert(data.error || 'Authentication failed');
                }
            } catch (error) {
                console.error(error);
                alert('Server error. Please try again later.');
            }
        }

        function handleLogout() {
            isLoggedIn = false;
            currentUserEmail = '';
            currentUserFullName = '';

            // Revert Navigation
            document.getElementById('nav-auth-btn').classList.remove('hidden');
            document.getElementById('nav-profile-btn').classList.add('hidden');
            document.getElementById('nav-logout-btn').classList.add('hidden');

            document.getElementById('mobile-auth-btn').classList.remove('hidden');
            document.getElementById('mobile-profile-btn').classList.add('hidden');
            document.getElementById('mobile-logout-btn').classList.add('hidden');

            // Hide tick marks upon logout
            document.querySelectorAll('.booking-tick').forEach(el => el.classList.add('hidden'));

            navigateTo('home');
        }

        function openBookingModal(sevaName) {
            if (!isLoggedIn) {
                alert("Please login or register first to book darshan and sevas.");
                navigateTo('auth');
                return;
            }
            currentSevaToBook = sevaName;
            document.getElementById('modal-seva-title').textContent = `Book ${sevaName}`;

            const today = new Date().toISOString().split('T')[0];
            document.getElementById('booking-date').setAttribute('min', today);
            document.getElementById('booking-date').value = '';

            document.getElementById('booking-modal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('booking-modal').classList.add('hidden');
            currentSevaToBook = '';
        }

        async function confirmBooking(event) {
            event.preventDefault();
            const date = document.getElementById('booking-date').value;

            try {
                const response = await fetch('https://sri-vinayaka-swamy-temple.onrender.com/api/book', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        email: currentUserEmail,
                        seva: currentSevaToBook,
                        date: date
                    })
                });

                const data = await response.json();

                if (response.ok) {
                    alert(`Booking Confirmed for ${currentSevaToBook} on ${date}. May Sri Vinayaka Swamy bless you!`);
                    closeModal();

                    // Refresh bookings to instantly show the new tick mark and update the profile tab
                    await fetchUserBookings();
                } else {
                    alert(data.error || 'Booking failed');
                }
            } catch (error) {
                console.error(error);
                alert('Server error. Please try again later.');
            }
        }
    </script>
</body>

</html>